# 常量

---

## 字面量-装在变量里的常量

内存可以看作一个充满**盒子的仓库**，每个盒子可以储存计算时用到的数据，称为一个**变量**。例如：用户需要的可乐数量、爆米花数量以及总金额等。、

那么，计算机如何定义存放在变量中的数据呢？

- **字面量**就是存放在变量中的数据。
- 字面量经常会被装到变量中使用，这个操作叫做**赋值**，一般写法为 **`变量名 = 字面量`**。

比如：小戴需要2瓶可乐，3个爆米花，我们在使用C++代码来申请变量`coke`和`popcorn`之后，需要将实际数量（也就是`2`和`3`这两个字面量）装到变量之中，以便进行之后的运算：

```c++
// 小戴需要2瓶可乐，3个爆米花
coke = 2;       
popcorn = 3;
```

- 代码中的符号`"="`是**赋值运算符**

  - 操作是将符号`=`右边的数值存放到左边的变量中
  - 关于运算符，我们将在之后的课程中详细展开讲解  

- 用来赋值给变量的是表示固定值的数据，称为**字面量**

  - 字面量可以作为数字或文本直接在代码中使用

  例如：`1`，`2`，`"Hello, World!"`等  

  - 字面量在程序运行过程中

    不能够被改变

    ，也

    不能被赋值

    - 装入变量中的数据本身不能再装入新的数据

你可以补充右侧代码区的`____`部分，把`2`和`3`两个常量，赋值给`coke`和`popcorn`两个变量。

```cpp
#include <iostream>
using namespace std;

int main() {
    int coke, popcorn;
    // TODO 小戴需要2瓶可乐，3个爆米花
    coke = 2;   
    popcorn = 3;
        
    return 0;
}
```



## 整数和浮点字面量-数学计算中的常量

由于数据需要满足不同计算需求，字面量具有非常多的类型。

首先我们来学习一下与数学计算关联最紧密的两类字面量——**整数字面量**和**浮点字面量**。

- 整数字面量

  是没有任何小数或指数部分的数字字面量，与数学中的

  整数

  直接关联。

  - **十进制**：直接写出的整数。

    例如：`0`，`23`，`-1024`

  - **八进制**：以数字`0`开头的整数，有效数字为`0~7`，并且不带有正负号。

    例如：`0126`，`0163`

  - **十六进制**：以`0x`或`0X`开头的整数，有效数字为`0~9`、`A~F`（`a~f`），并且不带有正负号。

    例如：`0x12a`，`0xf39`

 

- 浮点字面量

  是有分数形式或指数形式的数字字面量，与数学中的

  小数

  直接关联。

  - **小数形式**：由数字和小数点组成

    例如：`0.66`，`30.0`，`14.15926`

  - **指数形式**：使用`E`（或者`e`）代表以`10`为底数的指数`×10`

    - `E`的右侧为幂次的数值，必须为整数
    - 上述小数可以等价表示为：`1.23E-1`，`30.0e0`，`0.01415926E3`

不同于直接参与计算的整数与浮点字面量，常量中还有一类主要用来表达常见**字符**的常量，分为**单字符字面量**与**转义符字面量**。

- **单字符字面量**：

  通过将单个字符括在单**引号内**来创建字符**字面量**。

  例如：`'a'`，`'m'`，`'F'`，`'2'`，`'}'`等。

- **转义符字面量**：

  使用''开头的转义字符序列来表示一个特殊字符。

Tips：有时，在C++编程中必须使用不能键入或具有特殊含义的字符。例如，换行符（回车），制表符，问号，引号等。为了使用这些字符，就会使用''开头的转义字符序列用来表示一个特殊字符。

例如：

```
   `'\n'`表示换行符；

   `'\t'`表示制表符； 

   `'\''`表示单引号字符（不被解析成字符外的单引号）；

   `'\\'`表示真正的斜杠字符。
```

 

所有的字符字面量在计算机里都是有一个编码的，为了避免大家用不同的编码，造成混乱，美国的组织就出台了**ASCII编码**（American Standard Code for Information Interchange：美国信息交换标准代码），所有字符都采用ASCII编码，共有128个字符。每个字符都对应着一个`0～127`之间的整数。

下面两个表格中，深灰色的列就是其右侧字符对应的ASCII编码，你可以大致浏览一下，不需要强行记忆。

![img](https://staticcdn.boyuai.com/user-assets/34/eEo6g56HC5prRS74jPCR1W/A02-2-p-1.png!png) ![img](https://staticcdn.boyuai.com/user-assets/34/tJjK1fZzz3esiC53hee9Dz/A02-2-p-2.png!png)

## 字符串字面量-构成输出的常量

最后，我们来看另一种十分常见的常量，字符串字面量。

回顾我们在学习C++时会编写的第一个程序，就是用来输出Hello, World!这句话。

#include <iostream>
using namespace std;
int main() {
    cout << "Hello, World!" << endl;
    return 0;
}
可以看到Hello, World!被一对双引号""包围，这一个整体就是一个字符串字面量。

字符串字面量是由一对双引号括起来的字符序列

字符串中可以包含类似于字符字面量普通字符以及转义字符

字符串除了存储所包含的字符外，还额外包含一个结束标志'\0'

'\0'：结束符; ASCII编码对应数值为0的字符

练习

请使用转义字符打印一个3行4列的星号长方形：

****
****
****
参考代码：

```cpp
#include<iostream> 
using namespace std; 
int main() { 
    // 每行都输出4个*和一个换行符
    cout << "****\n" ;
    cout << "****\n" ;
    cout << "****\n" ;
    return 0;
} 
```


你可以补充右侧代码区的____部分，完成该练习。



```cpp
#include<iostream> 
using namespace std; 
int main() { 
    // TODO 输出三行内容，每行为4个*和一个换行符
    cout << "****\n" ;
    cout << "****\n" ;
    cout << "****\n" ;
    return 0;
} 
```



## 符号常量-具有名称的常量

接下来，我们来解决最后一个问题：在电影院的零食售卖机上，可乐5元一瓶，爆米花10元一份。

这两个随着程序运算**不改变**的量，可以像变量一样获得一个名称吗？

答案是肯定的。

- 在C++中，随着程序运算**不改变**的量叫做**符号常量**，可以使用`const`关键字来定义并且初始化：

```c++
const int kCokePrice = 5;
const int kPopcornPrice = 10;
```

- `const`是⼀个修饰符，加在数据类型`int`的前⾯，用来给这个变量加上一个不变的属性
  - 初始化时也可以将修饰符const与数据类型`int`调换位置，写成`int const kCokePrice = 5;` 
- 符号常量命名时参照[**Google 开源项目风格指南**](https://zh-google-styleguide.readthedocs.io/en/latest/google-cpp-styleguide/contents/)，以 “k” 开头，大小写混合
  - 实际编程过程中的名字最好简单易懂，用具有对应含义的英文或者拼音来表示  
- 定义的时候必须进行**初始化**，且在初始化之后不能再进行修改与重新赋值
  - 如果试图对常量做修改，例如把它放在赋值符号的左边，就会被编译器发现并指出错误

最后，总结一下符号常量的**初始化**伪代码：

```pseudocode
const 数据类型 常量名称 = 初始值;
```

或者

```pseudocode
数据类型 const 常量名称 = 初始值;
```

你可以补充右侧代码区的`____`部分，完成可乐价格和爆米花价格两个符号常量的定义，并运行代码查看两个符号常量输出的结果。

```cpp
#include<iostream> 
using namespace std; 

int main() { 
    // TODO 定义符号常量表示可乐单价
    const int kCokePrice = 5;
    // TODO 定义符号常量表示爆米花的单价
    const int kPopcornPrice = 10;
        
    // 将可乐与爆米花的单价分别打印在屏幕上，并且加上提示信息
    cout << "CokePrice is: " << kCokePrice << endl;
    cout << "PopcornPrice is: " << kPopcornPrice << endl;
    
    return 0;
} 
```



## 总结

**常量**指不会随着程序运行而改变的量，分为两种：**字面量**和**符号常量**

#### 字面量

- 我们将存放在变量中的数据称之为**字面量**。
- 把字面量装到变量中使用的操作叫做**赋值**，一般写法为`变量名 = 字面量`，比如：

```c++
// 小戴需要2瓶可乐，3个爆米花
coke = 2;       
popcorn = 3;
```

字面量分为以下几种不同类型：

- 整数字面量：没有任何小数或指数部分的数字字面量，与数学中的**整数**直接关联。

  如十进制的`13`，八进制的`0123`，十六进制的`0x12a`。

- 浮点字面量：有分数形式或指数形式的数字字面量，与数学中的**小数**直接关联。

  如小数形式的`0.66`，指数形式的`1.23E-1`。

- 字符字面量：分为**单字符字面量**与**转义符字面量**。如字母`'a'`，换行符`'\n'`，所有字符都采用**ASCII编码**，共有128个字符。

- 字符串字面量：由一对双引号括起来的字符序列。

  如`"Hello, World!"`。

#### 符号常量

- 随着程序运算**不改变**的量，赋予名称之后，有一个特定的名字，叫做**符号常量**，可以使用`const`关键字来定义并且**初始化**：

```pseudocode
const 数据类型 常量名称 = 初始值;
```

或者

```pseudocode
数据类型 const 常量名称 = 初始值;
```

比如：

```c++
const int kCokePrice = 5;
int const kPopcornPrice = 10;
```



```cpp
#include<iostream> 
using namespace std; 

int main() { 
    // 字面量
    cout << 1 << " 是一个整型字面量" << endl;
    cout << 0.5 << " 是一个浮点型字面量" << endl;
    cout << 'a' << " 是一个字符型字面量" << endl;
    cout << "这句话就是一个字符串型字面量\n" << endl;
    
    // 定义符号常量表示可乐单价
    const int kCokePrice = 5;
    // 定义符号常量表示爆米花的单价
    int const kPopcornPrice = 10;
    
    // 将可乐与爆米花的单价分别打印在屏幕上，并且加上提示信息
    cout << "CokePrice is: " << kCokePrice << endl;
    cout << "PopcornPrice is: " << kPopcornPrice << endl;
    
    return 0;
} 
```

