# 关系与逻辑表达式

---

## 关系表达式

- 在C++中，

  关系运算符

  用于判断表达式之间的大小关系，对两边的值进行6种情况的判断：

  - 大于`>`和大于等于`>=`运算符
  - 小于`<`和小于等于`<=`运算符
  - 相等`==`和不相等`!=`运算符

- 关系运算符中，表达式结果的类型可以是字符或者数字，但不可以是字符串

- 关系表达式返回一个**布尔值**：成立为1（true）代表真，不成立为0（false）代表假

Tips：判断两个数是否相等，用的是`==`而非`=`，因为`=`是用于**赋值**操作的。

- 浮点数

  一般不会用

   

  ```
  ==
  ```

   

  或者

   

  ```
  !=
  ```

   

  来判断，因为可能产生

  表示误差

  。

  - 比较两个浮点数是否相等，需要看两个数的

    差值

    是否小于一定的精度，比如：

    - 对于浮点数`a`和`b`，如果`(a - b) < 1e-6` 如果值为真，就判断两个浮点数相等。

举例：假设血量是整型数，小六希望判断己方血量`hp_a`和敌方血量`hp_b`两个数值之间的关系。

判断己方与敌方血量（整型数）关系的程序段

```c++
int hp_a, hp_b;
hp_a = 456;
hp_b = 857;
cout << "己方血量: " << hp_a << " 敌方血量: " << hp_b << endl;

// 关系运算符两边都是变量的基础用法
// 判断 自己血量 是否大于 敌方血量
cout << (hp_a > hp_b) << endl;
// 判断 自己血量 是否大于等于 敌方血量
cout << (hp_a >= hp_b) << endl;
// 判断 自己血量 是否小于 敌方血量
cout << (hp_a < hp_b) << endl;
// 判断 自己血量 是否小于等于 敌方血量
cout << (hp_a <= hp_b) << endl;
// 判断 自己血量 是否等于 敌方血量
cout << (hp_a == hp_b) << endl;
// 判断 自己血量 是否不等于 敌方血量
cout << (hp_a != hp_b) << endl;

// 关系运算符一边是表达式，一边是变量
// 判断 自己回50点血后的血量 是否小于 敌方血量
cout << ((hp_a + 50) < hp_b) << endl;

// 关系运算符一边是变量，一边是数字
// 判断 自己血量 是否小于 100
cout << (hp_a < 100) << endl;
```

举例：假设血量是浮点数，小六希望判断己方血量 `hp_c` 和 敌方血量`hp_d` 是否相等。

判断己方与敌方血量（浮点数）关系的程序段

```c++
float hp_c, hp_d;
hp_c = 100.0;
hp_d = 100.0;
cout << ((hp_c - hp_d) < 1e-6) << endl;
```

你可以修改右侧代码中的`____`部分，完成对应功能，熟悉关系表达式的用法，并运行试试。

```cpp
#include <cstdio>
#include <iostream>
using namespace std;

int main() {
    int hp_a, hp_b;
    hp_a = 456;
    hp_b = 857;
    cout << "己方血量: " << hp_a << " 敌方血量: " << hp_b << endl;

    
    // TODO 判断 自己血量 是否大于 敌方血量
    cout << (hp_a > hp_b) << endl;
    // TODO 判断 自己血量 是否大于等于 敌方血量
    cout << (hp_a >= hp_b) << endl;
    // TODO 判断 自己血量 是否小于 敌方血量
    cout << (hp_a < hp_b) << endl;
    // TODO 判断 自己血量 是否小于等于 敌方血量
    cout << (hp_a <= hp_b) << endl;
    // TODO 判断 自己血量 是否等于 敌方血量
    cout << (hp_a == hp_b) << endl;
    // TODO 判断 自己血量 是否不等于 敌方血量
    cout << (hp_a != hp_b) << endl;
    // TODO 判断 自己回50点血后的血量 是否小于 敌方血量
    cout << ((hp_a+50)<hp_b) << endl;
    // TODO 判断 自己血量 是否小于 100
    cout << (hp_a < 100) << endl;
    
    
    float hp_c, hp_d;
    hp_c = 100.0;
    hp_d = 100.0;
    // TODO 判断 两个浮点数血量是否相等
    cout << (hp_c == hp_d) << endl;
    
    return 0;
}
```



## 逻辑表达式

- 关系表达式可以判断**某个条件**是否成立，**逻辑表达式**中包含了多个关系表达式，可以对**多个条件**进行判断，例如:
  - 多个条件是否同时成立
  - 多个条件中是否至少有一个成立
  - 某个或某些条件是否不成立
- C++使用[逻辑运算符](https://baike.baidu.com/item/逻辑运算符)连接多个关系表达式，从而构建逻辑表达式。
- 常用的逻辑运算符有以下三种：
  - 逻辑AND运算符`&&`：判断两个关系表达式是否同时成立
  - 逻辑OR运算符`||`：判断两个关系表达式是否至少有一个成立
  - 逻辑NOT运算符`!`：判断某个关系表达式是否不成立
- 假设`p1`和`p2`是关系表达式的返回结果，逻辑运算符的运算规则可以参考下表：

![img](https://staticcdn.boyuai.com/user-assets/396/J2wV1tmKoA15HsEtDoP7wA/6-2.png!png)

Tips：判断多个条件是否成立时，我们可以组合逻辑运算符，构成更复杂的逻辑表达式。

举例：判断当变量 `a` 是否是30以下或者100以上的偶数时，可以通过 `(a%2==0) && ((a < 30) || (a > 100))` 得到结果。

举例：小六最近在游戏上进步了一点点，他知道有的时候撤不撤退，不只需要看自己血量是否比敌方高，还需要看自己的蓝量是否比敌方高。

假设布尔值 `higher_hp` 表示自己血量比对方高，`higher_mp` 表示自己蓝量比对方高。

小六想要知道：“是否自己血量和蓝量都比敌方高”，“是否自己血量和蓝量和中至少有一种比敌方高”，“是否血量没有敌方高”，“是否自己血量和蓝量都没有敌方高”，你能够把这些信息都输出给小六吗？

判断敌我双方血量和蓝量的程序段

```c++
// 假设小六血量比敌方高，但是蓝量没有敌方高
bool higher_hp = 1;
bool higher_mp = 0;

// 是否自己血量和蓝量都比敌方高
cout << (higher_hp && higher_mp) << endl;
// 是否自己血量和蓝量和中至少有一种比敌方高
cout << (higher_hp || higher_mp) << endl;
// 是否血量没有敌方高
cout << (!higher_hp) << endl;
// 是否自己血量和蓝量都没有敌方高
cout << (!higher_hp && !higher_mp) << endl;
```

你可以修改右侧代码中的`____`部分，完成对应功能，并运行试试。

```cpp
#include <cstdio>
#include <iostream>
using namespace std;

int main() {
    // 假设小六血量比敌方高，但是蓝量没有敌方高
    bool higher_hp = 1;
    bool higher_mp = 0;

    // TODO 输出是否自己血量和蓝量都比敌方高
    cout << (higher_hp && higher_mp) << endl;
    // TODO 输出是否自己血量和蓝量和中至少有一种比敌方高
    cout << (higher_hp | higher_mp) << endl;
    // TODO 输出是否血量没有敌方高
    cout << (!higher_hp) << endl;
    // TODO 输出是否自己血量和蓝量都没有敌方高
    cout << (!higher_hp && !higher_mp) << endl;
    
    return 0;
}
```

## 运算符优先级

- 至此，我们已经学习的运算符如下：
  - 算术运算符（`+` `-` `*` `/` `%` `++` `--`等）
  - 赋值运算符（`=`等）
  - 位运算符（`<<` `>>`等）
  - 关系运算符（`>` `>=` `<` `<=` `==` `!=`等）
  - 逻辑运算符（`&&` `||` `!`等）
- 对于这些常用的运算符，按照计算**优先级**从高到低（左边更高，右边更低）进行排列，可以得到如下表格：

![img](https://staticcdn.boyuai.com/user-assets/396/3R4ZeE23hiJbHbZm2r1UKb/6-1.png!png)

Tips：对于一个表达式，虽然可以通过计算优先级省略掉括号，但为了代码的可读性，我们在编写时一般都选择**把括号加上**。



## 代码：判断闰年

举例：生日在2月29日的程序员小键希望用一段代码判断输入的某一年是否为闰年。

- 判断“闰年”的口诀是：四年一闰，百年不闰，四百年又闰。即闰年分为两种：
  - 一种是被400整除的年份
  - 一种是不被100整除，但是被4整除的年份

为了综合这两个条件，小键通过逻辑表达式来实现了这个功能：

判断闰年的程序段（一）

```c++
int year;
cin >> year;
bool is_leap_year;

// 是400的倍数；或者是4的倍数并且不是100的倍数
is_leap_year = (year % 400 == 0) || ((year % 4 == 0) && (year % 100 != 0));

cout << is_leap_year << endl;
```

- 在C++中，对于逻辑运算符

  ```
  &&
  ```

  、

  ```
  ||
  ```

  、

  ```
  ！
  ```

  来说：

  - 参与计算的条件返回值为0，就会被当作假
    - 如果`year = 2000`是400的倍数，`year % 400`的结果为0，此时`(year % 400)`会被当作假
  - 参与计算的条件返回值非0，就会被当作真
    - 如果`year = 2001`不是400的倍数，`year % 400`结果为1，此时`(year % 400)`会被当作真

通过这个特性，用逻辑表达式判断闰年也可以这么写：

判断闰年的程序段（二）

```c++
int year;
cin >> year;
bool is_leap_year;

is_leap_year = !(year % 400) || (!(year % 4) && (year % 100));

cout << is_leap_year << endl;
```

你可以修改右侧代码中的`____`部分，完成对应功能，并运行试试。

```cpp
#include <cstdio>
#include <iostream>
using namespace std;
int main() {
    int year;
    cin >> year;
    bool is_leap_year;
    
    // TODO 请用一个表达式来判断 year 是否为闰年
    is_leap_year = !(year%400) || (!year % 4) && (year % 100);
    
    cout << is_leap_year << endl;
    return 0;
}
```



## 总结

### 关系表达式

**关系表达式**用于判断左右两边的表达式之间的**关系**，比如是否大于、是否相等等，表达式的值为0或者1，表示假或者真。

用法：

- 判断 a 和 b 的**大小关系**可以用`a > b` `a >= b` `a < b` `a <= b`
- 当然我们也可以单纯的判断 a 和 b **是否相等** `a == b` `a != b`

比如：

判断己方血量 `hp_a` 和 敌方血量`hp_b` 两个数值之间的关系。

```c++
int hp_a = 456, hp_b = 857;

// 判断 自己血量 是否大于 敌方血量
cout << (hp_a > hp_b) << endl;
// 判断 自己血量 是否大于等于 敌方血量
cout << (hp_a >= hp_b) << endl;
// 判断 自己血量 是否小于 敌方血量
cout << (hp_a < hp_b) << endl;
// 判断 自己血量 是否小于等于 敌方血量
cout << (hp_a <= hp_b) << endl;
// 判断 自己血量 是否等于 敌方血量
cout << (hp_a == hp_b) << endl;
// 判断 自己血量 是否不等于 敌方血量
cout << (hp_a != hp_b) << endl;
// 判断 自己回50点血后的血量 是否小于 敌方血量
cout << ((hp_a + 50) < hp_b) << endl;
// 判断 自己血量 是否小于 100
cout << (hp_a < 100) << endl;
```

### 逻辑表达式

**逻辑表达式**用于连接关系表达式**判断更复杂的条件是否成立**，常用的逻辑运算符有以下三种：

- **`&&`**：判断两个条件是否同时成立
- **`||`**：判断两个条件是否至少有一个成立
- **`!`**：判断某个条件是否不成立

具体的运算规则可以参考下表：

![img](https://staticcdn.boyuai.com/user-assets/396/J2wV1tmKoA15HsEtDoP7wA/6-2.png!png)

比如：

假设布尔值 `higher_hp` 表示自己血量比对方高，`higher_mp` 表示自己蓝量比对方高。 判断“是否自己血量和蓝量都比敌方高”，“是否自己血量和蓝量和中至少有一种比敌方高”，“是否血量没有敌方高”，“是否自己血量和蓝量都没有敌方高”。

```c++
// 假设血量比敌方高，但是蓝量没有敌方高
bool higher_hp = 1;
bool higher_mp = 0;

// 是否自己血量和蓝量都比敌方高
cout << (higher_hp && higher_mp) << endl;
// 是否自己血量和蓝量和中至少有一种比敌方高
cout << (higher_hp || higher_mp) << endl;
// 是否血量没有敌方高
cout << (!higher_hp) << endl;
// 是否自己血量和蓝量都没有敌方高
cout << (!higher_hp && !higher_mp) << endl;
```

### 优先级

对于一些其他常用的运算符来说，按照**优先级**从高到低，左边更高，右边更低，排出来是这样的：

![img](https://staticcdn.boyuai.com/user-assets/396/3R4ZeE23hiJbHbZm2r1UKb/6-1.png!png)





## 练习

练习4·代码题

### 绝对值

输入一个整数，输出该数的绝对值。

额外提示: if语句的写法

```cpp
if ( 表达式 ) {
    // 如果表达式为真将执行的语句
}
else {
    // 如果表达式为假将执行的语句（可以没有else分支）
}
```

输入描述：

一行，一个整数

输出描述：

一行，该数的绝对值

示例 1：

输入：

```
-10
```

输出：

```
10
```



```cpp
#include <bits/stdc++.h>
using namespace std; 

int main() {
    // 请补全代码，实现题目功能
    int num;
    cin >> num;
    if (num < 0){
        cout << (~num)+1 << endl;
    } else {
        cout << num << endl;
    }

    return 0;
}
```



### 倍数与判定

输入一个数字，判断它是否既是5的倍数，又是7的倍数，若是则输出yes，否则输出no

额外提示：if语句的写法

```CPP
if ( 表达式 ) {
    // 如果表达式为真将执行的语句
}
else {
    // 如果表达式为假将执行的语句（可以没有else分支）
}
```

输入描述：

一行，一个整数

输出描述：

一行，yes 或 no

示例 1：

输入：

```
35
```

输出：

```
yes
```

示例 2：

输入：

```
1
```

输出：

```
no
```



```cpp
#include <bits/stdc++.h>
using namespace std; 

int main() {
    // 请补全代码，实现题目功能
    int num;
    cin >> num;
    bool if_tag = (((num%5)==0) && (num%7)==0);
    if (if_tag){
        cout << "yes" << endl;
    } else {
        cout << "no" << endl;
    }
    return 0;
}
```



### 是字母吗

输入一个字符，若是大写或小写字母，输出yes，否则输出no

额外提示：if语句的写法

```cpp
if ( 表达式 ) {
    // 如果表达式为真将执行的语句
}
else {
    // 如果表达式为假将执行的语句（可以没有else分支）
}
```

输入描述：

一行，一个字符

输出描述：

一行，yes 或 no

示例 1：

输入：

```
q
```

输出：

```
yes
```

示例 2：

输入：

```
>
```

输出：

```
no
```





```cpp
#include <bits/stdc++.h>
using namespace std; 

int main() {
    // 请补全代码，实现题目功能
    char a ;
    cin >> a;
    if (('a' <= a && a <= 'z') || ('A' <= a && a <= 'Z')) {
        cout << "yes";
    }
    else {
        cout << "no";
    }  
    return 0;
}

```

