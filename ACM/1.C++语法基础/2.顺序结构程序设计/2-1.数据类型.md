# 顺序结构设计

---

## 什么是数据类型

- 在C++的变量声明中，变量名之前需要指定**数据类型**。

```pseudocode
数据类型 变量名称;
```

- **数据类型**将会决定一个变量存储什么样的信息，从而决定变量的**容量**有多大，在内存中需要分配多大的空间。
- C++中的数据类型分为**基本类型**和**复合类型**：

- 其中基本类型包括了**整数**、**浮点数**，我们接下来会详细展开;
- 复合类型是在基本类型的基础上创建的，包括**数组**、**字符串**以及**结构体**等，后面你会陆续了解到。



## 整数类型

- 整数类型分为**数值整数类型**和**字符类型**。

- 数值整数用来表示**没有小数部分**的数字。
  - 数值整数可以按照**占用内存**大小分为`short`、`int`、`long`以及`long long`这四种，占用内存越大的类型能表示的数值范围就更大。
  - 同时又可以按照是否表示负值分为**有符号**版本和**无符号**版本  
- 字符类型则专门用来存储计算机中的**基本符号**：英文字母、数字以及标点等。





## 整数类型-数值整数类型

表示范围

在数学中，整数的范围是无穷无尽的，但是计算机的内存是有限的，所以一种类型能表示的整数范围也是有限的。因此，在C++中，我们需要根据需求，选择合适的数值整数类型。

- `short`、`int`、`long`以及`long long`这四种数值整数类型占用的字节数递增，所以能表示的整数范围也递增。
  - `short`类型至少占据**2**个字节，即16位；一般占用2字节；
  - `int`在现代系统中一般占用**4**个字节，即32位；类型长度大于等于`short`类型；
  - `long`类型长度至少占据**4**个字节，且大于等于`int`类型；一般占用4个字节；
  - `long long`类型长度至少占据**8**个字节，且大于等于`long`类型；一般占用8个字节。

Tips： 为了避免不同的计算机系统的设计差异，C++提供了一个标准来保证各种类型的**最小长度**：

- 计算机内存采用**二进制**的存储方式，每一个位可以表示0与1两种状态，因此占据n*n* 位的内存块，可以表示 2^n2*n* 个不同的数字。
  - 比如一个 8 位的内存块，可以表示 2 的 8 次方个不同的组合，也就是说能表示 256 个不同的整数；
  - 32 位的`int`类型，可以表示 2^{32}=4294967296232=4294967296 个不同的整数。  
- 每个类型数据可以分别指定**有符号版本**和**无符号版本**，用来明确该类型是否需要表示负值。
  - 比如`unsigned int`就表示无符号的`int`类型，只能表示正值；
  - `signed int`就表示有符号的`int`类型，可以表示负值。
  - 在不指定有无符号时，都默认是有符号版本。  
- 如果是**无符号**版本，那么一个8位的内存块可以一一对应到**0～255**之间的整数；
- 如果是**有符号**版本，那么就会考虑负数，这个8位的内存块可以表示**一128～127**之间的整数。



## 整数类型-数值整数类型

举例

- 可以根据实际需求，在变量**声明**或者初始化时**指定**变量的数据**类型**。

例如：

```c++
short price = 500;    // 单价
int coupon = -2000;   // 优惠
long total = 48000;   // 总价
```

Tips： 一定要**注意每种类型能表示的范围**，只有使用正确的数据类型，变量的存储才会具有意义。

比如，我们如果将以上代码中的总价`total`变量定义为`short`类型，运行以下代码：

```c++
short total = 48000;  // 总价
cout << "总价为：" << total << "元。\n";
```

可以看到程序的输出为：

```
总价为：-17536元。
```

Tips： 这是由于`short`默认状态下是符号类型，占据16位内存，数据范围在-32768～32767之间，所以无法正确表示48000。

 

- 默认状态下`short`等四个整数类型都是符号类型，这使得它们能够表示的最大数值减小了一半左右。  
- 在确定变量的数值不会是负数的情况下，我们可以利用`unsigned`关键字，加在原有数据类型之前，创建**无符号**的整数类型。

例如：

```c++
unsigned short bike = 6;           // 单车数
unsigned int car = 58000;          // 汽车数
unsigned long people = 16825000;   // 总人数
```

 

- 如果使用无符号`short`类型定义总价`total`变量，我们运行以下代码：

```c++
unsigned short total = 48000;  // 总价
cout << "总价为：" << total << "元。\n";
```

可以看到程序的输出为：

```
总价为：48000元。
```

Tips： 这是由于`unsigned short`舍弃了负数的表示，数据的表示范围在0～65535之间，可以正确表示48000。

你可以补充右侧代码区的`____`部分，声明`short`类型的变量`total_1`，和`unsigned short`类型的变量`total 2`，并初始化为48000，输出两个变量观察实际的值。



## 整数类型-字符整数类型

- **字符类型**`char`是另一种特殊的整数类型，它专门用来存储计算机中的基本符号：英文字母、数字以及标点等。

Tips： 计算机通过**ASCII编码**，将128个字符映射到对应数字上，于是我们使用一个字节（8位）就可以将所有的字符表示出来。通过查看内存，可以发现储存在类型为`char`的变量中的实际上是一个**整数**，对应于这个字符的ASCII编码值。

所以，我们可以既可以使用**字符常量**，也可以使用**字符对应的ASCII编码**，来给`char`类型的变量赋值。

```c++
// 用字符常量初始化一个 char 类型
char size_1 = 'L';
// 用整数常量初始化一个 char 类型，字符L的ASCII编码值为76
char size_2 = 76;
```

- 字符整数类型虽然存储方式和数值整数类型相似，都是存放一个数值，但是在输出显示时是不同的。

我们可以通过以下代码来观察数值整数类型和字符整数类型的区别：

```c++
// 初始化一个 int 类型
int length = 76; 
// 用字符常量初始化一个 char 类型
char size_1 = 'L';
// 用整数常量初始化一个 char 类型，字符L的ASCII编码值为76
char size_2 = 76;

cout << "衣服的长度为：" << length << "厘米。\n";
cout << "衣服的大小为：" << size_1 << "号。\n";
cout << "衣服的大小为：" << size_2 << "号。\n";
```

可以看到，程序的输出为：

```
衣服的长度为：76厘米。
衣服的大小为：L号。
衣服的大小为：L号。
```

为什么同样存储的值是76，`int`类型的输出和`char`类型的输出是不同的呢？

Tips： 这是因为`cout`识别到了`size_1`和`size_2`是字符类型变量，从而在输出时自动进行了**转换**，把数字转成了该编码对应的字符。

你可以补充右侧代码区的`____`部分，分别用字符常量和整数常量初始化`char`类型的变量，并观察输出的结果。

```cpp
#include <iostream>
using namespace std;

int main() {
    // 初始化一个 int 类型
    int length = 76; 
    // TODO 用字符常量初始化一个 char 类型 size_1 为L
    char size_1 = 'L';
    // TODO 用整数常量初始化一个 char 类型 size_2 为L，字符L的ASCII编码值为76
    char size_2 = 76;

    cout << "衣服的长度为：" << length << "厘米。\n";
    cout << "衣服的大小为：" << size_1 << "号。\n";
    cout << "衣服的大小为：" << size_2 << "号。\n";
    
    return 0;
}
```



## 浮点类型

表示精度

学习了C++中的各种整数类型，我们继续来看基本类型中的第二大块：浮点类型。

- 计算机用浮点数表示两类数：
  - 带**小数**部分的数字； 例如：圆周率3.14、黄金分割比例0.618等，这些数字在整数之间
  - 数值非常**大**的数字。 例如：宇宙中原子个数约10的80次方，这个数字已经无法被`long long`整型表示
- C++中的浮点数分为三种类型：`float`、`double`以及`long double`，分别表示不同的**精度**。
- 浮点数的精度在于它可以表示的**有效位数**以及**指数范围**。
  - 指数范围指的是可以表示的指数幂次大小；  

由于浮点数更多的应用是用来表示带小数的数字，所以我们主要从**有效位数**的角度讲解精度。

- 有效位数用来描述浮点数值的刻画**精确程度**。

  例如：3.14的有效位数是3位，3.1415926的有效位数是8位。

Tips： 需要注意的是，有效位数不会因为小数点的改变而改变，无论314000或者3.14000，它们的有效位数都是3位，多出来0可以看作是一种**占位符**，因为实际有意义的数字只有3个：3、1和4。

- 在三种浮点类型中，更大的内存空间可以表示更多的有效位数：
  - `float`类型通常占用**4**个字节，有效位数为6位
  - `double`类型占用的空间是`float`类型的两倍，即**8**个字节，有效位数为15位
  - `long double`类型一般占用**16**个字节的空间



举例

- 根据实际需求，在浮点数变量声明或者初始化时指定数据类型，例如：

```c++
float ratio = 0.618;           // 黄金分割比例
double pi = 3.1415926;          // 圆周率
long double atom = 1e80;   // 宇宙中原子个数
```

- 同样的，只有在正确的数据类型之下，变量的存储才会具有意义。

如果将以上代码中的圆周率放在`float`类型的变量`pi`中，运行以下代码：

```c++
float pi = 3.1415926;             // 圆周率
printf("圆周率为：%.7f。\n", pi);   // 输出浮点数的7位小数
```

- 这里`printf`也是C++中的一种输出函数，我们会有专门的章节进行讲解。

可以看到程序的输出为：

```
圆周率为：3.1415925。
```

Tips： 这是由于`float`类型只能确保6个有效位数的精确显示，最后的数字5是系统随机表示的。想要完整显示8个有效位的圆周率，我们需要使用`double`类型的变量进行初始化：

```c++
double pi = 3.1415926;          // 圆周率
printf("圆周率为：%f。", pi);     // 输出浮点数的7位小数
```

可以看到程序的输出为：

```
圆周率为：3.1415926。
```

你可以补充右侧代码区的`____`部分，分别初始化`float`类型的变量`pi_1`，和`double`类型的变量`pi_2`为3.1415926，并输出观察结果。

```cpp
#include <iostream>
using namespace std;

int main() {
    // TODO 声明并初始化一个float类型的变量 pi_1 为 3.1415926
    float pi_1 = 3.1415926;
    printf("圆周率为：%.7f。\n", pi_1);   // 输出浮点数的7位小数
    // TODO 声明并初始化一个double类型的变量 pi_2 为 3.1415926
    double pi_2 = 3.1415926;
    printf("圆周率为：%.7f。\n", pi_2);   // 输出浮点数的7位小数
    return 0;
}
```



## 总结

- 在C++的变量声明中，变量名之前需要指定**数据类型**。

```pseudocode
数据类型 变量名称;
```

- 数据类型将会决定一个变量存储什么样的信息，从而决定变量的容量有多大，在内存中需要分配多大的空间。  
- C++种的基本类型包括了**整数**、**浮点数**两种。

数值整数类型

- 数值整数用来表示**没有小数部分**的数字。

- 可以按照占用内存大小分为`short`、`int`、`long`以及`long long`这四种，占用内存越大的类型能表示的数值范围就更大。
  - `short`类型一般占用2字节
  - `int`类型一般占用4个字节
  - `long`类型一般占用4个字节
  - `long long`类型一般占用8个字节

- 同时又可以按照是否表示负值分为有符号版本和无符号版本
  - 比如`unsigned int`就表示无符号的`int`类型，只能表示正值，表示范围为$0\sim2^{32}-1$。
  - `signed int`就表示有符号的`int`类型，可以表示负值，表示范围为$-2^{31} \sim 2^{31}−1$。
  - 在不指定有无符号时，都默认是有符号版本。

我们可以需要根据实际需求，在变量声明或者初始化时指定变量的数据类型，例如：

```c++
short price = 500;    // 单价
int coupon = -2000;   // 优惠
long total = 48000;   // 总价
```

字符整数类型

- **字符类型**`char`是另一种特殊的整数类型，它专门用来存储计算机中的基本符号：英文字母、数字以及标点等。 

- 计算机通过**ASCII编码**，将128个字符映射到对应数字上，于是我们使用**1个字节（8位）** 就可以将所有的字符表示出来。

- 可以既可以使用**字符常量**，也可以使用**字符对应的ASCII编码**，来给`char`类型的变量赋值。

 

```c++
// 用字符常量初始化一个 char 类型
char size_1 = 'L';
// 用整数常量初始化一个 char 类型，字符L的ASCII编码值为76
char size_2 = 76;
```

浮点类型

- C++中的浮点数分为三种类型：`float`、`double`以及`long double`，分别表示不同的**精度**。

- 浮点数的精度在于它可以表示的**有效位数**以及**指数范围**。 

- 在三种浮点类型中，更大的内存空间可以表示更多的有效位数：
  - `float`类型通常占用4个字节，有效位数为6位
  - `double`类型占用的空间是`float`类型的两倍，即8个字节，有效位数为15位
  - `long double`类型一般占用16个字节的空间

可以需要根据实际需求，在浮点数变量声明或者初始化时指定数据类型，例如：

```c++
float ratio = 0.618;           // 黄金分割比例
double pi = 3.1415926;          // 圆周率
long double atom = 1e80;   // 宇宙中原子个数
```

