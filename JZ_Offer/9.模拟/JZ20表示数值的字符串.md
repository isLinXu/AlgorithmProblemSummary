# JZ20表示数值的字符串

---

## 描述

请实现一个函数用来判断字符串str是否表示数值（包括科学计数法的数字，小数和整数）。

**科学计数法的数字**(按顺序）可以分成以下几个部分:

1.若干空格

2.一个整数或者小数

3.（可选）一个 'e' 或 'E' ，后面跟着一个整数(可正可负)

4.若干空格

**小数**（按顺序）可以分成以下几个部分：

1.若干空格

2.（可选）一个符号字符（'+' 或 '-'）

3.可能是以下描述格式之一:

3.1 至少一位数字，后面跟着一个点 '.'

3.2 至少一位数字，后面跟着一个点 '.' ，后面再跟着至少一位数字

3.3 一个点 '.' ，后面跟着至少一位数字

4.若干空格

**整数**（按顺序）可以分成以下几个部分：

1.若干空格
2.（可选）一个符号字符（'+' 或 '-')
3.至少一位数字
4.若干空格



例如，字符串["+100","5e2","-123","3.1416","-1E-16"]都表示数值。

但是["12e","1a3.14","1.2.3","+-5","12e+4.3"]都不是数值。

提示:

1.1 <= str.length <= 25

2.str 仅含英文字母（大写和小写），数字（0-9），加号 '+' ，减号 '-' ，空格 ' ' 或者点 '.' 。

3.如果怀疑用例是不是能表示为数值的，可以使用python的print(float(str))去查看

进阶：时间复杂度O(n)\*O*(*n*) ，空间复杂度O(n)\*O*(*n*) 

## 示例1

输入：

```
"123.45e+6"
```

复制

返回值：

```
true
```

复制

## 示例2

输入：

```
"1.2.3"
```

复制

返回值：

```
false
```

复制

## 示例3

输入：

```
"."
```

复制

返回值：

```
false
```

复制

## 示例4

输入：

```
"    .2  "
```

复制

返回值：

```
true
```





## 题解

对于一个数值字符串，可以将其分解成：

- A[.B][E|eC]
- .B[E|eC]

两种情况，其中A是整数部分，B是小数部分，C是指数部分 []表示这是一个整体，这个整体必须同时出现 A C可能以'+'或'-'号开头，B不会，只能是以数字开头。

按照上面提到的两种模式，开始遍历

1. 清空开头的空格
2. 检查A是否合法
3. 检查是否有.
   - 有 则检查B
   - 无 跳过
4. 检查是否有E | e
   - 有 则检查C
   - 无 跳过
5. 清空末尾的空格
6. 判断是否到末尾，并且前面都合法。

上代码

```cpp
class Solution {
public:
    int i = 0; //全局遍历变量
  
    //用于判断A C是否合法
    bool scanIntger(string str){
        //如果开头有正负号则跳过
        if(str[i]=='+' || str[i]=='-'){
            i++;
        }
        return scanfUnsignIntger(str);
    }
  
    // 用于判断B是否合法
    bool scanfUnsignIntger(string str){
        int k = i;//记录开头位置
        while('0'<=str[i] && str[i]<='9'){
            i++;
        }
        // 如果有数字，则i会向前移动，i>k
        // 如果没有数字，则i不会移动，说明不合法
        return i>k;
    }
    
    bool isNumeric(string str) {
        // write code here
        // 清空开头的空格
        while(str[i]==' ') i++;
        // 检查A是否合法
        bool ans = scanIntger(str);

        if(i<str.size() && str[i]=='.'){
            i++;
            //检查B是否合法
            ans = scanfUnsignIntger(str) || ans;
        }
        
        if(i<str.size() && (str[i]=='E'|| str[i]=='e')){
            i++;
            // 检查C是否合法
            // 注意这里是 && 当e前面没有数字时，整个字符串不能表示数字
            // 当e后面没有数字时，整个字符串不能表示数字
            // scanInger检测e后面有没有数字，ans表示前面有没有数字 两个条件必须同时满足
            ans = scanIntger(str) && ans;
        }
        // 清空结尾的空格
        while(str[i]==' ') i++;
        
        if(ans==true && i==str.size()){
            return true;
        }else{
            return false;
        }
    }
};

```

